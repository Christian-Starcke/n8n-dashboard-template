---
import Layout from '../../layouts/Page.astro';
import { Container } from '@components/odyssey-theme';
import ExecutionTable from '../../components/dashboard/ExecutionTable.astro';
import LoadingState from '../../components/dashboard/LoadingState.astro';
import EmptyState from '../../components/dashboard/EmptyState.astro';

const seo = {
  title: 'Executions | N8N Automation',
  description: 'Monitor workflow executions',
};

// Placeholder execution data
const executions = [
  {
    id: 'exec-1',
    workflowId: 'wf-1',
    workflowName: 'Data Sync Workflow',
    status: 'success' as const,
    startedAt: new Date(Date.now() - 1000 * 60 * 5).toISOString(),
    finishedAt: new Date(Date.now() - 1000 * 60 * 4).toISOString(),
    executionTime: 1200,
  },
  {
    id: 'exec-2',
    workflowId: 'wf-2',
    workflowName: 'Email Notification',
    status: 'running' as const,
    startedAt: new Date(Date.now() - 1000 * 30).toISOString(),
  },
  {
    id: 'exec-3',
    workflowId: 'wf-1',
    workflowName: 'Data Sync Workflow',
    status: 'error' as const,
    startedAt: new Date(Date.now() - 1000 * 60 * 60).toISOString(),
    finishedAt: new Date(Date.now() - 1000 * 60 * 59).toISOString(),
    executionTime: 500,
  },
  {
    id: 'exec-4',
    workflowId: 'wf-3',
    workflowName: 'Database Backup',
    status: 'success' as const,
    startedAt: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(),
    finishedAt: new Date(Date.now() - 1000 * 60 * 60 * 2 + 3000).toISOString(),
    executionTime: 3000,
  },
  {
    id: 'exec-5',
    workflowId: 'wf-4',
    workflowName: 'API Integration',
    status: 'waiting' as const,
    startedAt: new Date(Date.now() - 1000 * 60 * 10).toISOString(),
  },
];
---

<Layout {seo}>
  <Container>
    <div class="executions-header">
      <h1>Executions</h1>
      <p class="executions-subtitle">Monitor and track all workflow executions</p>
    </div>

    {executions.length > 0 ? (
      <ExecutionTable executions={executions} />
    ) : (
      <EmptyState
        title="No executions yet"
        message="Workflow executions will appear here once you start running workflows."
        actionLabel="View Workflows"
        actionHref="/workflows"
      />
    )}
  </Container>
</Layout>

<style>
  .executions-header {
    margin-bottom: 2rem;
  }

  .executions-header h1 {
    font-size: 2rem;
    font-weight: 700;
    color: var(--theme-on-bg);
    margin: 0 0 0.5rem 0;
  }

  .executions-subtitle {
    font-size: 1rem;
    color: var(--theme-on-bg);
    opacity: 0.7;
    margin: 0;
  }

  @media (max-width: 768px) {
    .executions-header h1 {
      font-size: 1.5rem;
    }
  }
</style>

